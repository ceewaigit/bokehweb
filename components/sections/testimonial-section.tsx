"use client";

import { cn } from "@/lib/utils";
import { gpuAccelerated } from "@/lib/animation-utils";
import { motion } from "framer-motion";
import { SectionBackdrop } from "@/components/ui/section-backdrop";

interface Testimonial {
    content: string;
    author: {
        name: string;
        handle?: string;
        title?: string;
        avatar?: string;
        verified?: boolean;
    };
    stats?: {
        likes?: number;
        retweets?: number;
        replies?: number;
    };
    date?: string;
}

interface TestimonialSectionProps {
    className?: string;
    title?: React.ReactNode;
    subtitle?: string;
    testimonials: Testimonial[];
}

// Company logos as inline SVGs for reliability
const companyLogos = [
    {
        name: "Apple",
        svg: (
            <svg viewBox="0 0 384 512" className="h-7 sm:h-8 w-auto" fill="currentColor">
                <path d="M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z" />
            </svg>
        ),
    },
    {
        name: "Google",
        svg: (
            <svg viewBox="0 0 24 24" className="h-7 sm:h-8 w-auto" fill="currentColor">
                <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4" />
                <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853" />
                <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05" />
                <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335" />
            </svg>
        ),
    },
    {
        name: "Microsoft",
        svg: (
            <svg viewBox="0 0 23 23" className="h-6 sm:h-7 w-auto" fill="currentColor">
                <path fill="#f35325" d="M1 1h10v10H1z" />
                <path fill="#81bc06" d="M12 1h10v10H12z" />
                <path fill="#05a6f0" d="M1 12h10v10H1z" />
                <path fill="#ffba08" d="M12 12h10v10H12z" />
            </svg>
        ),
    },
    {
        name: "Amazon",
        svg: (
            <svg viewBox="0 0 448 512" className="h-6 sm:h-7 w-auto" fill="currentColor">
                <path d="M257.2 162.7c-48.7 1.8-169.5 15.5-169.5 117.5 0 109.5 138.3 114 183.5 43.2 6.5 10.2 35.4 37.5 45.3 46.8l56.8-56S341 288.9 341 261.4V114.3C341 89 316.5 32 228.7 32 140.7 32 94 87 94 136.3l73.5 6.8c16.3-49.5 54.2-49.5 54.2-49.5 40.7-.1 35.5 29.8 35.5 69.1zm0 86.8c0 80-84.2 68-84.2 17.2 0-47.2 50.5-56.7 84.2-57.8v40.6zm136 163.5c-7.7 10-70 67-174.5 67S34.2 408.5 9.7 379c-6.8-7.7 1-11.3 5.5-8.3C88.5 415.2 203 488.5 387.7 401c7.5-3.7 13.3 2 5.5 12zm39.8-11c-3-6.3-46.5-29.3-71.5-19.5-1 1.5-1.5 6 3.8 5 31.5-7 51.5 5.5 54.5 12 1.8 4.3-8.3 34-9.5 40-1.3 5.5 3.5 4.3 6.5 2 5.8-4.8 24.5-20 23.5-26.5-.5-3.5-4.5-6.5-7.3-13z" />
            </svg>
        ),
    },
    {
        name: "PayPal",
        svg: (
            <svg viewBox="0 0 124 33" className="h-6 sm:h-7 w-auto">
                <path fill="#253B80" d="M46.211 6.749h-6.839a.95.95 0 0 0-.939.802l-2.766 17.537a.57.57 0 0 0 .564.658h3.265a.95.95 0 0 0 .939-.803l.746-4.73a.95.95 0 0 1 .938-.803h2.165c4.505 0 7.105-2.18 7.784-6.5.306-1.89.013-3.375-.872-4.415-.972-1.142-2.696-1.746-4.985-1.746zM47 13.154c-.374 2.454-2.249 2.454-4.062 2.454h-1.032l.724-4.583a.57.57 0 0 1 .563-.481h.473c1.235 0 2.4 0 3.002.704.359.42.469 1.044.332 1.906zM66.654 13.075h-3.275a.57.57 0 0 0-.563.481l-.145.916-.229-.332c-.709-1.029-2.29-1.373-3.868-1.373-3.619 0-6.71 2.741-7.312 6.586-.313 1.918.132 3.752 1.22 5.031.998 1.176 2.426 1.666 4.125 1.666 2.916 0 4.533-1.875 4.533-1.875l-.146.91a.57.57 0 0 0 .562.66h2.95a.95.95 0 0 0 .939-.803l1.77-11.209a.568.568 0 0 0-.561-.658zm-4.565 6.374c-.316 1.871-1.801 3.127-3.695 3.127-.951 0-1.711-.305-2.199-.883-.484-.574-.668-1.391-.514-2.301.295-1.855 1.805-3.152 3.67-3.152.93 0 1.686.309 2.184.892.499.589.697 1.411.554 2.317zM84.096 13.075h-3.291a.954.954 0 0 0-.787.417l-4.539 6.686-1.924-6.425a.953.953 0 0 0-.912-.678h-3.234a.57.57 0 0 0-.541.754l3.625 10.638-3.408 4.811a.57.57 0 0 0 .465.9h3.287a.949.949 0 0 0 .781-.408l10.946-15.8a.57.57 0 0 0-.468-.895z" />
                <path fill="#179BD7" d="M94.992 6.749h-6.84a.95.95 0 0 0-.938.802l-2.766 17.537a.569.569 0 0 0 .562.658h3.51a.665.665 0 0 0 .656-.562l.785-4.971a.95.95 0 0 1 .938-.803h2.164c4.506 0 7.105-2.18 7.785-6.5.307-1.89.012-3.375-.873-4.415-.971-1.142-2.694-1.746-4.983-1.746zm.789 6.405c-.373 2.454-2.248 2.454-4.062 2.454h-1.031l.725-4.583a.568.568 0 0 1 .562-.481h.473c1.234 0 2.4 0 3.002.704.359.42.468 1.044.331 1.906zM115.434 13.075h-3.273a.567.567 0 0 0-.562.481l-.145.916-.23-.332c-.709-1.029-2.289-1.373-3.867-1.373-3.619 0-6.709 2.741-7.311 6.586-.312 1.918.131 3.752 1.219 5.031 1 1.176 2.426 1.666 4.125 1.666 2.916 0 4.533-1.875 4.533-1.875l-.146.91a.57.57 0 0 0 .564.66h2.949a.95.95 0 0 0 .938-.803l1.771-11.209a.571.571 0 0 0-.565-.658zm-4.565 6.374c-.314 1.871-1.801 3.127-3.695 3.127-.949 0-1.711-.305-2.199-.883-.484-.574-.666-1.391-.514-2.301.297-1.855 1.805-3.152 3.67-3.152.93 0 1.686.309 2.184.892.501.589.699 1.411.554 2.317zM119.295 7.23l-2.807 17.858a.569.569 0 0 0 .562.658h2.822c.469 0 .867-.34.939-.803l2.768-17.536a.57.57 0 0 0-.562-.659h-3.16a.571.571 0 0 0-.562.482z" />
            </svg>
        ),
    },
    {
        name: "GitHub",
        svg: (
            <svg viewBox="0 0 98 96" className="h-7 sm:h-8 w-auto" fill="currentColor">
                <path d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" />
            </svg>
        ),
    },
    {
        name: "Stripe",
        svg: (
            <svg viewBox="0 0 512 214" className="h-6 sm:h-7 w-auto" fill="currentColor">
                <path d="M512 110.08c0-36.409-17.636-65.138-51.342-65.138c-33.85 0-54.33 28.73-54.33 64.854c0 42.808 24.179 64.426 58.88 64.426c16.925 0 29.725-3.84 39.396-9.244v-28.445c-9.67 4.836-20.764 7.823-34.844 7.823c-13.796 0-26.027-4.836-27.591-21.618h69.547c0-1.85.284-9.245.284-12.658m-70.258-13.511c0-16.071 9.814-22.756 18.774-22.756c8.675 0 17.92 6.685 17.92 22.756zm-90.31-51.627c-13.939 0-22.899 6.542-27.876 11.093l-1.85-8.818h-31.288v165.83l35.555-7.537l.143-40.249c5.12 3.698 12.657 8.96 25.173 8.96c25.458 0 48.64-20.48 48.64-65.564c-.142-41.245-23.609-63.715-48.498-63.715m-8.534 97.991c-8.391 0-13.37-2.986-16.782-6.684l-.143-52.765c3.698-4.124 8.818-6.968 16.925-6.968c12.942 0 21.902 14.506 21.902 33.137c0 19.058-8.818 33.28-21.902 33.28M241.493 36.551l35.698-7.68V0l-35.698 7.538zm0 10.809h35.698v124.444h-35.698zm-38.257 10.524L200.96 47.36h-30.72v124.444h35.556V87.467c8.39-10.951 22.613-8.96 27.022-7.396V47.36c-4.551-1.707-21.191-4.836-29.582 10.524m-71.112-41.386l-34.702 7.395l-.142 113.92c0 21.05 15.787 36.551 36.836 36.551c11.662 0 20.195-2.133 24.888-4.693V140.8c-4.55 1.849-27.022 8.391-27.022-12.658V77.653h27.022V47.36h-27.022zM35.982 83.484c0-5.546 4.551-7.68 12.09-7.68c10.808 0 24.461 3.272 35.27 9.103V51.484c-11.804-4.693-23.466-6.542-35.27-6.542C19.2 44.942 0 60.018 0 85.192c0 39.252 54.044 32.995 54.044 49.92c0 6.541-5.688 8.675-13.653 8.675c-11.804 0-26.88-4.836-38.827-11.378v33.849c13.227 5.689 26.596 8.106 38.827 8.106c29.582 0 49.92-14.648 49.92-40.106c-.142-42.382-54.329-34.845-54.329-50.774" />
            </svg>
        ),
    },
    {
        name: "Figma",
        svg: (
            <svg viewBox="0 0 38 57" className="h-7 sm:h-8 w-auto">
                <path fill="#1abcfe" d="M19 28.5a9.5 9.5 0 1 1 19 0 9.5 9.5 0 0 1-19 0z" />
                <path fill="#0acf83" d="M0 47.5A9.5 9.5 0 0 1 9.5 38H19v9.5a9.5 9.5 0 1 1-19 0z" />
                <path fill="#ff7262" d="M19 0v19h9.5a9.5 9.5 0 1 0 0-19H19z" />
                <path fill="#f24e1e" d="M0 9.5A9.5 9.5 0 0 0 9.5 19H19V0H9.5A9.5 9.5 0 0 0 0 9.5z" />
                <path fill="#a259ff" d="M0 28.5A9.5 9.5 0 0 0 9.5 38H19V19H9.5A9.5 9.5 0 0 0 0 28.5z" />
            </svg>
        ),
    },
    {
        name: "Linear",
        svg: (
            <svg viewBox="0 0 100 100" className="h-6 sm:h-7 w-auto" fill="currentColor">
                <path d="M1.22541 61.5228c-.2225-.9485.90748-1.5459 1.59638-.857L39.3342 97.1782c.6889.6889.0915 1.8189-.857 1.5765C20.0515 94.0535 5.94639 79.9484 1.22541 61.5228ZM.00189 46.8891c-.01764.2833.08887.5599.29668.7678l52.0458 52.0458c.2079.2078.4845.3143.7678.2967 15.396-1.0249 29.3401-9.4936 37.5765-23.0021 1.0729-1.7602-.8166-3.7024-2.624-2.7126L19.1463 39.5096c-1.3435.7352-2.9954.8119-4.4079.1512L3.27931 34.154c-1.63728-.7658-3.57867.3776-3.47222 2.1915.3842 6.5419 1.23903 12.9606 3.1946 18.9466.16927.5184.0829 1.0891-.23689 1.5172l-1.48891 1.9975c-.2386.3199-.3686.7063-.3763 1.0823Zm5.51164 14.9765C3.31814 50.1773 3.42842 38.0666 6.79671 26.903c.42539-1.4099-.32689-2.9093-1.65665-3.5297l-1.85125-.8642c-1.5722-.7336-2.01259-2.7506-.8917-4.0798C12.1188 7.62222 26.2573.00012 42.1523 0c1.4452-.00001 2.3242 1.58759 1.5706 2.83697l-5.0781 8.41723c-.4861.8056-1.3394 1.2952-2.2608 1.3462-8.0973.4479-15.5497 3.6896-21.3169 9.3055-.7717.7513-1.9106.9446-2.8688.5765l-3.5325-1.3571c-1.3199-.5073-2.7953.3312-2.9599 1.7102-.6956 5.8265-.2774 11.606 1.1193 17.0218.1575.6108.0381 1.2613-.3233 1.7768l-2.2317 3.044c-.3027.4129-.7359.7137-1.229.8611Z" />
            </svg>
        ),
    },
    {
        name: "Vercel",
        svg: (
            <svg viewBox="0 0 76 65" className="h-5 sm:h-6 w-auto" fill="currentColor">
                <path d="M37.5274 0L75.0548 65H0L37.5274 0Z" />
            </svg>
        ),
    },
    {
        name: "Notion",
        svg: (
            <svg viewBox="0 0 100 100" className="h-7 sm:h-8 w-auto" fill="currentColor">
                <path d="M6.017 4.313l55.333 -4.087c6.797 -0.583 8.543 -0.19 12.817 2.917l17.663 12.443c2.913 2.14 3.883 2.723 3.883 5.053v68.243c0 4.277 -1.553 6.807 -6.99 7.193L24.467 99.967c-4.08 0.193 -6.023 -0.39 -8.16 -3.113L3.3 79.94c-2.333 -3.113 -3.3 -5.443 -3.3 -8.167V11.113c0 -3.497 1.553 -6.413 6.017 -6.8z" />
                <path fill="#fff" d="M61.35 0.227l-55.333 4.087C1.553 4.7 0 7.617 0 11.113v60.66c0 2.723 0.967 5.053 3.3 8.167l13.007 16.913c2.137 2.723 4.08 3.307 8.16 3.113l64.257 -3.89c5.433 -0.387 6.99 -2.917 6.99 -7.193V20.64c0 -2.21 -0.873 -2.847 -3.443 -4.733L74.167 3.143c-4.273 -3.107 -6.02 -3.5 -12.817 -2.917zM25.92 19.523c-5.247 0.353 -6.437 0.433 -9.417 -1.99L8.927 11.507c-0.77 -0.78 -0.383 -1.753 1.557 -1.947l53.193 -3.887c4.467 -0.39 6.793 1.167 8.54 2.527l9.123 6.61c0.39 0.197 1.36 1.36 0.193 1.36l-54.933 3.307 -0.68 0.047zM19.803 88.3V30.367c0 -2.53 0.777 -3.697 3.103 -3.893L86 22.78c2.14 -0.193 3.107 1.167 3.107 3.693v57.547c0 2.53 -0.39 4.67 -3.883 4.863l-60.377 3.5c-3.493 0.193 -5.043 -0.97 -5.043 -4.083zm59.6 -54.827c0.387 1.75 0 3.5 -1.75 3.7l-2.91 0.577v42.773c-2.527 1.36 -4.853 2.137 -6.797 2.137 -3.107 0 -3.883 -0.973 -6.21 -3.887l-19.03 -29.94v28.967l6.02 1.363s0 3.5 -4.857 3.5l-13.39 0.777c-0.39 -0.78 0 -2.723 1.357 -3.11l3.497 -0.97v-38.3L30.48 40.667c-0.39 -1.75 0.58 -4.277 3.3 -4.473l14.367 -0.967 19.8 30.327v-26.83l-5.047 -0.58c-0.39 -2.143 1.163 -3.7 3.103 -3.89l13.4 -0.78z" />
            </svg>
        ),
    },
    {
        name: "Slack",
        svg: (
            <svg viewBox="0 0 127 127" className="h-7 sm:h-8 w-auto">
                <path fill="#E01E5A" d="M27.2 80c0 7.3-5.9 13.2-13.2 13.2S.8 87.3.8 80s5.9-13.2 13.2-13.2h13.2V80zm6.6 0c0-7.3 5.9-13.2 13.2-13.2s13.2 5.9 13.2 13.2v33c0 7.3-5.9 13.2-13.2 13.2s-13.2-5.9-13.2-13.2V80z" />
                <path fill="#36C5F0" d="M47 27c-7.3 0-13.2-5.9-13.2-13.2S39.7.6 47 .6s13.2 5.9 13.2 13.2V27H47zm0 6.7c7.3 0 13.2 5.9 13.2 13.2s-5.9 13.2-13.2 13.2H13.9C6.6 60.1.7 54.2.7 46.9s5.9-13.2 13.2-13.2H47z" />
                <path fill="#2EB67D" d="M99.9 46.9c0-7.3 5.9-13.2 13.2-13.2s13.2 5.9 13.2 13.2-5.9 13.2-13.2 13.2H99.9V46.9zm-6.6 0c0 7.3-5.9 13.2-13.2 13.2s-13.2-5.9-13.2-13.2V13.8C66.9 6.5 72.8.6 80.1.6s13.2 5.9 13.2 13.2v33.1z" />
                <path fill="#ECB22E" d="M80.1 99.8c7.3 0 13.2 5.9 13.2 13.2s-5.9 13.2-13.2 13.2-13.2-5.9-13.2-13.2V99.8h13.2zm0-6.6c-7.3 0-13.2-5.9-13.2-13.2s5.9-13.2 13.2-13.2h33.1c7.3 0 13.2 5.9 13.2 13.2s-5.9 13.2-13.2 13.2H80.1z" />
            </svg>
        ),
    },
    {
        name: "Spotify",
        svg: (
            <svg viewBox="0 0 168 168" className="h-7 sm:h-8 w-auto">
                <path fill="#1ED760" d="M84 0C37.6 0 0 37.6 0 84s37.6 84 84 84 84-37.6 84-84S130.4 0 84 0zm38.5 121.3c-1.5 2.5-4.7 3.2-7.1 1.7-19.5-11.9-44-14.6-72.9-8-2.8.6-5.6-1.1-6.2-3.9-.6-2.8 1.1-5.6 3.9-6.2 31.6-7.2 58.7-4.1 80.6 9.3 2.4 1.4 3.2 4.7 1.7 7.1zm10.3-22.9c-1.9 3-5.8 4-8.9 2.1-22.3-13.7-56.3-17.7-82.7-9.7-3.4 1-7-1-8-4.4s1-7 4.4-8c30.2-9.1 67.8-4.7 93.3 11.1 3.1 1.9 4 5.9 2.1 8.9zm.9-23.8c-26.8-15.9-71-17.4-96.6-9.6-4.1 1.2-8.4-1.1-9.6-5.2-1.2-4.1 1.1-8.4 5.2-9.6 29.4-8.9 78.3-7.2 109.2 11.1 3.7 2.2 4.9 6.9 2.7 10.6-2.2 3.6-6.9 4.9-10.6 2.7z" />
            </svg>
        ),
    },
];

function CompanyMarquee() {
    const marqueeContent = [...companyLogos, ...companyLogos];

    return (
        <div
            className="relative w-full overflow-hidden py-4 pause-on-hover"
            style={{
                maskImage: 'linear-gradient(to right, transparent, black 10%, black 90%, transparent)',
                WebkitMaskImage: 'linear-gradient(to right, transparent, black 10%, black 90%, transparent)',
            }}
        >
            <div
                className="flex w-max items-center animate-marquee-slow"
                style={{ willChange: "transform" }}
            >
                {marqueeContent.map((company, index) => (
                    <div
                        key={`${company.name}-${index}`}
                        className="flex-shrink-0 px-8 sm:px-10 md:px-12 flex items-center justify-center opacity-40 hover:opacity-80 transition-opacity duration-300"
                        title={company.name}
                    >
                        {company.svg}
                    </div>
                ))}
            </div>
        </div>
    );
}

function TestimonialCard({
    testimonial,
    index,
}: {
    testimonial: Testimonial;
    index: number;
}) {

    return (
        <motion.div
            className={cn(
                "relative bg-white/60 rounded-2xl p-6 sm:p-8",
                "backdrop-blur-sm",
                "border border-slate-100/80",
                "shadow-[0_1px_3px_rgba(15,23,42,0.04)]",
                "hover:shadow-[0_8px_24px_rgba(15,23,42,0.06)]",
                "hover:border-slate-200/80",
                "transition-shadow transition-colors duration-300 ease-out"
            )}
            initial={{ opacity: 0, y: 24 }}
            whileInView={{ opacity: 1, y: 0 }}
            viewport={{ once: true, margin: "-60px" }}
            transition={{
                duration: 0.6,
                delay: index * 0.08,
                ease: [0.22, 0.61, 0.36, 1],
            }}
            style={gpuAccelerated}
        >
            {/* Quote content */}
            <p className="text-[15px] sm:text-base leading-[1.7] text-slate-700 mb-6">
                "{testimonial.content}"
            </p>

            {/* Author */}
            <div className="flex items-center gap-3">
                {/* Avatar */}
                {testimonial.author.avatar ? (
                    <img
                        src={testimonial.author.avatar}
                        alt={testimonial.author.name}
                        className="w-10 h-10 rounded-full object-cover flex-shrink-0"
                    />
                ) : (
                    <div className="w-10 h-10 rounded-full bg-gradient-to-br from-slate-200 to-slate-100 flex items-center justify-center flex-shrink-0">
                        <span className="text-sm font-semibold text-slate-500">
                            {testimonial.author.name.charAt(0)}
                        </span>
                    </div>
                )}

                {/* Name & Title */}
                <div className="min-w-0">
                    <p className="text-sm font-semibold text-slate-900 truncate">
                        {testimonial.author.name}
                    </p>
                    {testimonial.author.title && (
                        <p className="text-xs text-slate-500 truncate">
                            {testimonial.author.title}
                        </p>
                    )}
                </div>
            </div>
        </motion.div>
    );
}

export function TestimonialSection({
    className,
    title = "Loved by users",
    subtitle,
    testimonials,
}: TestimonialSectionProps) {

    return (
        <section className={cn("relative py-28 sm:py-36 overflow-hidden", className)}>
            <SectionBackdrop variant="grid" texture fade="all" className="opacity-30" />

            <div className="mx-auto max-w-6xl px-6">
                {/* Section Header */}
                <div className="text-center mb-16 sm:mb-20">
                    <motion.h2
                        className="text-4xl sm:text-5xl md:text-6xl font-[family-name:var(--font-display)] font-medium tracking-[-0.035em] leading-[1.08] text-balance mb-5"
                        initial={{ opacity: 0, y: 24 }}
                        whileInView={{ opacity: 1, y: 0 }}
                        viewport={{ once: true }}
                        transition={{ duration: 0.6 }}
                        style={gpuAccelerated}
                    >
                        <span className="bg-gradient-to-b from-slate-800 via-slate-700 to-slate-500 bg-clip-text text-transparent">
                            {title}
                        </span>
                    </motion.h2>
                    {subtitle && (
                        <motion.p
                            className="text-base sm:text-lg text-slate-500 max-w-xl mx-auto leading-relaxed"
                            initial={{ opacity: 0, y: 16 }}
                            whileInView={{ opacity: 1, y: 0 }}
                            viewport={{ once: true }}
                            transition={{ duration: 0.5, delay: 0.15 }}
                            style={gpuAccelerated}
                        >
                            {subtitle}
                        </motion.p>
                    )}
                </div>

                {/* Company Logo Marquee */}
                <motion.div
                    className="mb-16 sm:mb-20"
                    initial={{ opacity: 0 }}
                    whileInView={{ opacity: 1 }}
                    viewport={{ once: true }}
                    transition={{ duration: 0.8, delay: 0.2 }}
                    style={{ willChange: "opacity", transform: "translateZ(0)" }}
                >
                    <CompanyMarquee />
                </motion.div>

                {/* Testimonial Grid */}
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-5">
                    {testimonials.map((testimonial, index) => (
                        <TestimonialCard
                            key={testimonial.author.name}
                            testimonial={testimonial}
                            index={index}
                        />
                    ))}
                </div>
            </div>
        </section>
    );
}
